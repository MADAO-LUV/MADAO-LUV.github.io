<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MADAO</title>
  <icon>https://www.gravatar.com/avatar/ae2a6c03a9e90f5d585dcd23ed6f88c8</icon>
  <subtitle>BOSS SAMA拜托了!</subtitle>
  <link href="https://madao-luv.github.io/atom.xml" rel="self"/>
  
  <link href="https://madao-luv.github.io/"/>
  <updated>2024-05-17T16:26:50.403Z</updated>
  <id>https://madao-luv.github.io/</id>
  
  <author>
    <name>MADAO</name>
    <email>3335075714@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>模电小知识</title>
    <link href="https://madao-luv.github.io/posts/75e8915.html"/>
    <id>https://madao-luv.github.io/posts/75e8915.html</id>
    <published>2024-05-17T16:16:03.456Z</published>
    <updated>2024-05-17T16:26:50.403Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>个人健身系统(后续会更新交互式)</title>
    <link href="https://madao-luv.github.io/posts/2266ffb9.html"/>
    <id>https://madao-luv.github.io/posts/2266ffb9.html</id>
    <published>2024-05-14T03:49:50.149Z</published>
    <updated>2024-05-14T16:30:00.971Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总览—-主函数执行-pyhton版"><a href="#总览—-主函数执行-pyhton版" class="headerlink" title="总览—-主函数执行(pyhton版)"></a>总览—-主函数执行(pyhton版)</h1><h2 id="1-Main-函数的工作原理"><a href="#1-Main-函数的工作原理" class="headerlink" title="1.Main()函数的工作原理"></a>1.Main()函数的工作原理</h2><p><strong>因此，我们接下来开始分解模块来进行编程，以后会进行更新改进，不会再使用print式进行交互</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;实现主要的业务逻辑&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        print_menu()</span><br><span class="line">        choose = <span class="built_in">input</span>(<span class="string">&quot;请输入你需要的功能:&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> choose == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            add_User()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            append_YourMov(Users[-<span class="number">1</span>][<span class="string">&quot;level&quot;</span>])</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            Detele_Mov()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">            show_allBehavior()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;5&#x27;</span>:</span><br><span class="line">            exit()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;6&#x27;</span>:</span><br><span class="line">            <span class="keyword">pass</span>  <span class="comment">#可以自己拓展</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#执行主函数代码,一run就开始调用该函数</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><h2 id="2-为用户打印出总菜单"><a href="#2-为用户打印出总菜单" class="headerlink" title="2.为用户打印出总菜单"></a>2.为用户打印出总菜单</h2><p>这里是分别打印出选项,供给客户选择<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打印出主菜单，供用户选择功能</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_menu</span>():</span><br><span class="line">    <span class="built_in">print</span>(date)  <span class="comment"># 这个是用来调用我在上面引用的api，如果报错请删掉这一行 用来显示时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;您的贴心撸铁友 v1.0&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;1:添加个人用户&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;2:添加动作&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;3:删除动作&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;4:显示锻炼日志&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;5:结束运行&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(sen)  <span class="comment">#显示名人名言</span></span><br></pre></td></tr></table></figure></p><h2 id="3-引入的库函数"><a href="#3-引入的库函数" class="headerlink" title="3.引入的库函数"></a>3.引入的库函数</h2><p><strong>我们在这里引入的库函数，它的作用是显示日期和每日好句(从open.iciba.com获取的api)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">* @date---里面是今天的日期</span></span><br><span class="line"><span class="string">* @content ---每日一句</span></span><br><span class="line"><span class="string">* @sen---每日一句    content 和 sen 的语句是不同的,注意一下</span></span><br><span class="line"><span class="string">*</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">date=datetime.today().strftime(<span class="string">&quot;%Y年%m月%d日&quot;</span>) <span class="comment">#生成日期</span></span><br><span class="line">url = <span class="string">&#x27;http://open.iciba.com/dsapi/&#x27;</span></span><br><span class="line">res = requests.get(url)</span><br><span class="line">content_e = res.json()[<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">content_c = res.json()[<span class="string">&#x27;note&#x27;</span>]</span><br><span class="line">content = content_e + content_c</span><br><span class="line"><span class="comment">#content_t = res.json()[&#x27;picture2&#x27;]</span></span><br><span class="line">url2=<span class="string">r&quot;http://dict.cn&quot;</span></span><br><span class="line">resp = requests.get(url2)</span><br><span class="line">soup = BeautifulSoup(resp.text,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">htm=soup.find(<span class="string">&quot;div&quot;</span>,class_=<span class="string">&quot;daily_sentence&quot;</span>)</span><br><span class="line">sen=htm.text.strip().split(<span class="string">&quot;\n\t&quot;</span>)[<span class="number">2</span>].strip()</span><br></pre></td></tr></table></figure></p><h1 id="1-添加用户功能"><a href="#1-添加用户功能" class="headerlink" title="1.添加用户功能"></a>1.添加用户功能</h1><h2 id="1-原来版本"><a href="#1-原来版本" class="headerlink" title="1.原来版本"></a>1.原来版本</h2><p><strong>原理:这里我们简单地使用print,if…else,for循环来实现添加用户功能，以及加上一个User数组用来存放用户字典类型</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">User = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_User</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;哔哔哔---!正在加载中&quot;</span>)</span><br><span class="line">    <span class="keyword">global</span> Users  <span class="comment">#全局变量</span></span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户姓名:&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> person <span class="keyword">in</span> Users:</span><br><span class="line">        <span class="keyword">if</span> person[<span class="string">&quot;name&quot;</span>] == name:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;该名称已被占用&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;在这几个输入前面插入for 循环遍历是为了防止名称重复，并且重名时可以提前结束</span></span><br><span class="line"><span class="string">    防止做无用功&quot;&quot;&quot;</span></span><br><span class="line">    age = <span class="built_in">input</span>(<span class="string">&quot;请输入用户年龄:&quot;</span>)</span><br><span class="line">    security = <span class="built_in">input</span>(<span class="string">&quot;请输入用户密码:&quot;</span>)</span><br><span class="line">    level = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您现在的健身状态:(1.小白,2.大佬(请输入选项数字)):&quot;</span>))</span><br><span class="line">    user = &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>:name,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>:age,</span><br><span class="line">        <span class="string">&quot;security&quot;</span>:security,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: level</span><br><span class="line">    &#125;</span><br><span class="line">    Users.append(user)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;添加用户信息成功&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(Users)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="2-更新版本"><a href="#2-更新版本" class="headerlink" title="2.更新版本"></a>2.更新版本</h2><p><strong>……等待您的发掘…….</strong></p><h1 id="2-添加锻炼动作"><a href="#2-添加锻炼动作" class="headerlink" title="2.添加锻炼动作"></a>2.添加锻炼动作</h1><h2 id="1-原始版本"><a href="#1-原始版本" class="headerlink" title="1.原始版本"></a>1.原始版本</h2><p>原理:这个是你添加动作的地方,模板我写好了.<br>@level—-代表等级的意思,我在这里设置了1.小白,2.大佬这两个等级,你在用户登录的时候就已经要求设置好了<br>@choose2—-代表选择的动作,你可以看到那个函数 def append_YourMov(level): 这里面我已经设置好了choose2的范围1-6</p><h3 id="1-这是内部的实现"><a href="#1-这是内部的实现" class="headerlink" title="1.这是内部的实现"></a>1.这是内部的实现</h3><p><strong>里面空出来的部分是可以用来自由发挥的</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Behavior = [] <span class="comment">#用来装入锻炼动作</span></span><br><span class="line"><span class="comment">#2的内部调用函数,用来选择动作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Movement_menu</span>(<span class="params">levle,choose2</span>):</span><br><span class="line">    <span class="comment">#等级1是小白，等级二是大佬</span></span><br><span class="line">    <span class="keyword">global</span> Behavior <span class="comment">#全局数组</span></span><br><span class="line">    <span class="keyword">if</span> levle == <span class="number">1</span> <span class="keyword">and</span> choose2 == <span class="number">1</span>:</span><br><span class="line">        end = <span class="literal">True</span> <span class="comment">#为了是结束选择</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;1.双杠臂屈伸&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;2.俯卧撑&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;3.哑铃飞鸟&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;4.退出&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            choice = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;老铁你的选择是.....&quot;</span>)) <span class="comment">#这里输入选择，为下面持续选择做准备</span></span><br><span class="line">            <span class="keyword">if</span> choice == <span class="number">1</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;双杠臂屈伸&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">2</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;俯卧撑&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">3</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;哑铃飞鸟&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">4</span>:</span><br><span class="line">                end = <span class="literal">False</span> <span class="comment">#结束循环</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            Behavior.append(Mov)</span><br><span class="line">    <span class="keyword">elif</span> levle == <span class="number">2</span> <span class="keyword">and</span> choose2 == <span class="number">1</span>:</span><br><span class="line">        end = <span class="literal">True</span>  <span class="comment"># 为了是结束选择</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;1.蝴蝶机夹胸&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;2.哑铃上斜卧推&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;3.器械上斜卧推胸&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;4.退出&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            choice = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;老铁你的选择是.....&quot;</span>))  <span class="comment"># 这里输入选择，为下面持续选择做准备</span></span><br><span class="line">            <span class="keyword">if</span> choice == <span class="number">1</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;蝴蝶机夹胸&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">2</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;哑铃上斜卧推&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">3</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;器械上斜卧推胸&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">4</span>:</span><br><span class="line">                end = <span class="literal">False</span>  <span class="comment"># 结束循环</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            Behavior.append(Mov)</span><br></pre></td></tr></table></figure></p><h3 id="2-这是给客户看的添加动作菜单"><a href="#2-这是给客户看的添加动作菜单" class="headerlink" title="2.这是给客户看的添加动作菜单"></a>2.这是给客户看的添加动作菜单</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.添加所喜好的动作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">append_YourMov</span>(<span class="params">level</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;终于等到你,老铁&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;1.胸肌&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;2.肩部&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;3.腹肌&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;4.二头&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;5.背部&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;6.腿部&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------&quot;</span>)</span><br><span class="line">    choose2 = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您的喜好:&quot;</span>))</span><br><span class="line">    <span class="keyword">if</span> choose2 == <span class="number">1</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">2</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">3</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">4</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">5</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">6</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">6</span>)</span><br></pre></td></tr></table></figure><h2 id="2-更新版本-1"><a href="#2-更新版本-1" class="headerlink" title="2.更新版本"></a>2.更新版本</h2><p><strong>……等待您的发掘…….</strong></p><h1 id="3-删除动作"><a href="#3-删除动作" class="headerlink" title="3.删除动作"></a>3.删除动作</h1><h2 id="1-原始版本-1"><a href="#1-原始版本-1" class="headerlink" title="1.原始版本"></a>1.原始版本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.删除你想要去掉的运动动作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Detele_Mov</span>():</span><br><span class="line">    <span class="keyword">global</span> Behavior <span class="comment">#里面加有动作</span></span><br><span class="line">    i = <span class="number">1</span> <span class="comment">#定义这为对应的选择</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> demo <span class="keyword">in</span> Behavior:</span><br><span class="line">        <span class="built_in">print</span>(i,<span class="string">&quot;---&quot;</span>,demo,end = <span class="string">&quot; &quot;</span>)</span><br><span class="line">        i += <span class="number">1</span> <span class="comment">#需要自增</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;退出选择请在下方输入:4&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        choose3 = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您想要删除的动作:&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> choose3 == <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="comment">#结束函数</span></span><br><span class="line">        Behavior.pop(choose3-<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="2-更新版本-2"><a href="#2-更新版本-2" class="headerlink" title="2.更新版本"></a>2.更新版本</h2><p><strong>等待你的发掘…..</strong></p><h1 id="4-显示锻炼日志"><a href="#4-显示锻炼日志" class="headerlink" title="4.显示锻炼日志"></a>4.显示锻炼日志</h1><h2 id="1-原始版本-2"><a href="#1-原始版本-2" class="headerlink" title="1.原始版本"></a>1.原始版本</h2><p><strong>该函数作用是显示锻炼日志</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#4.该函数作用是显示锻炼日志</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_allBehavior</span>():</span><br><span class="line">    <span class="built_in">print</span>(date) <span class="comment">#这个是用来调用我在上面引用的api，如果报错请删掉这一行</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在加载您的绝美训练动作....&quot;</span>)</span><br><span class="line">    nums = <span class="built_in">len</span>(Behavior)   <span class="comment">#统计动作数量</span></span><br><span class="line">    <span class="keyword">if</span> nums == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;快去添加你喜好的动作吧！&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line">        <span class="keyword">return</span> <span class="comment">#没有动作添加，所以直接退出该函数</span></span><br><span class="line">    <span class="keyword">for</span> Mov <span class="keyword">in</span> Behavior:</span><br><span class="line">        <span class="built_in">print</span>(Mov)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="comment">#这里的Behavior是那个动作集里的</span></span><br><span class="line">    <span class="built_in">print</span>(content) <span class="comment">#这个是用来调用我在上面引用的api，如果报错请删掉这一行</span></span><br></pre></td></tr></table></figure></p><h2 id="2-更新版本-3"><a href="#2-更新版本-3" class="headerlink" title="2.更新版本"></a>2.更新版本</h2><p><strong>等待你的发掘…..</strong></p><h1 id="5-代码的总结构"><a href="#5-代码的总结构" class="headerlink" title="5.代码的总结构"></a>5.代码的总结构</h1><h2 id="1-原始版本-3"><a href="#1-原始版本-3" class="headerlink" title="1.原始版本"></a>1.原始版本</h2><p>提醒一句<strong>功能5.其实在main()函数调用的menu函数里实现了,就是直接使用内置函数exit()—-结束运程</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">date=datetime.today().strftime(<span class="string">&quot;%Y年%m月%d日&quot;</span>) <span class="comment">#生成日期</span></span><br><span class="line">url = <span class="string">&#x27;http://open.iciba.com/dsapi/&#x27;</span></span><br><span class="line">res = requests.get(url)</span><br><span class="line">content_e = res.json()[<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">content_c = res.json()[<span class="string">&#x27;note&#x27;</span>]</span><br><span class="line">content = content_e + content_c</span><br><span class="line"><span class="comment">#content_t = res.json()[&#x27;picture2&#x27;]</span></span><br><span class="line">url2=<span class="string">r&quot;http://dict.cn&quot;</span></span><br><span class="line">resp = requests.get(url2)</span><br><span class="line">soup = BeautifulSoup(resp.text,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">htm=soup.find(<span class="string">&quot;div&quot;</span>,class_=<span class="string">&quot;daily_sentence&quot;</span>)</span><br><span class="line">sen=htm.text.strip().split(<span class="string">&quot;\n\t&quot;</span>)[<span class="number">2</span>].strip()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">******************************</span></span><br><span class="line"><span class="string">* @date---里面是今天的日期</span></span><br><span class="line"><span class="string">* @content ---每日一句</span></span><br><span class="line"><span class="string">* @sen---每日一句    content 和 sen 的语句是不同的,注意一下</span></span><br><span class="line"><span class="string">*</span></span><br><span class="line"><span class="string">* 上面是我用来调用api的，不要动，如果运行不了就删除</span></span><br><span class="line"><span class="string">*</span></span><br><span class="line"><span class="string">*******************************</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">Users = []  <span class="comment">#用户</span></span><br><span class="line">Behavior = []  <span class="comment">#锻炼动作</span></span><br><span class="line"><span class="comment">#打印出主菜单，供用户选择功能</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_menu</span>():</span><br><span class="line">    <span class="built_in">print</span>(date)  <span class="comment"># 这个是用来调用我在上面引用的api，如果报错请删掉这一行 用来显示时间</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;您的贴心撸铁友 v1.0&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;1:添加个人用户&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;2:添加动作&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;3:删除动作&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;4:显示锻炼日志&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;5:结束运行&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(sen)  <span class="comment">#显示名人名言</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1.添加用户</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_User</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;哔哔哔---!正在加载中&quot;</span>)</span><br><span class="line">    <span class="keyword">global</span> Users  <span class="comment">#全局变量</span></span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户姓名:&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> person <span class="keyword">in</span> Users:</span><br><span class="line">        <span class="keyword">if</span> person[<span class="string">&quot;name&quot;</span>] == name:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;该名称已被占用&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;在这几个输入前面插入for 循环遍历是为了防止名称重复，并且重名时可以提前结束</span></span><br><span class="line"><span class="string">    防止做无用功&quot;&quot;&quot;</span></span><br><span class="line">    age = <span class="built_in">input</span>(<span class="string">&quot;请输入用户年龄:&quot;</span>)</span><br><span class="line">    security = <span class="built_in">input</span>(<span class="string">&quot;请输入用户密码:&quot;</span>)</span><br><span class="line">    level = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您现在的健身状态:(1.小白,2.大佬(请输入选项数字)):&quot;</span>))</span><br><span class="line">    user = &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>:name,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>:age,</span><br><span class="line">        <span class="string">&quot;security&quot;</span>:security,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: level</span><br><span class="line">    &#125;</span><br><span class="line">    Users.append(user)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;添加用户信息成功&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(Users)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">这个是你添加动作的地方,模板我写好了</span></span><br><span class="line"><span class="string">@level---代表等级的意思,我在这里设置了1.小白,2.大佬这两个等级,你在用户登录的时候就已经要求设置好了</span></span><br><span class="line"><span class="string">@choose2---代表选择的动作,你可以看到那个函数 def append_YourMov(level): 这里面我已经设置好了choose2的范围1-6</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">#2的内部调用函数,用来选择动作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Movement_menu</span>(<span class="params">levle,choose2</span>):</span><br><span class="line">    <span class="comment">#等级1是小白，等级二是大佬</span></span><br><span class="line">    <span class="keyword">global</span> Behavior <span class="comment">#全局数组</span></span><br><span class="line">    <span class="keyword">if</span> levle == <span class="number">1</span> <span class="keyword">and</span> choose2 == <span class="number">1</span>:</span><br><span class="line">        end = <span class="literal">True</span> <span class="comment">#为了是结束选择</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;1.双杠臂屈伸&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;2.俯卧撑&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;3.哑铃飞鸟&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;4.退出&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            choice = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;老铁你的选择是.....&quot;</span>)) <span class="comment">#这里输入选择，为下面持续选择做准备</span></span><br><span class="line">            <span class="keyword">if</span> choice == <span class="number">1</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;双杠臂屈伸&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">2</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;俯卧撑&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">3</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;哑铃飞鸟&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">4</span>:</span><br><span class="line">                end = <span class="literal">False</span> <span class="comment">#结束循环</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            Behavior.append(Mov)</span><br><span class="line">    <span class="keyword">elif</span> levle == <span class="number">2</span> <span class="keyword">and</span> choose2 == <span class="number">1</span>:</span><br><span class="line">        end = <span class="literal">True</span>  <span class="comment"># 为了是结束选择</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;1.蝴蝶机夹胸&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;2.哑铃上斜卧推&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;3.器械上斜卧推胸&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;4.退出&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;---------------------&quot;</span>)</span><br><span class="line">            choice = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;老铁你的选择是.....&quot;</span>))  <span class="comment"># 这里输入选择，为下面持续选择做准备</span></span><br><span class="line">            <span class="keyword">if</span> choice == <span class="number">1</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;蝴蝶机夹胸&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">2</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;哑铃上斜卧推&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">3</span>:</span><br><span class="line">                Mov = &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;器械上斜卧推胸&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">4</span>:</span><br><span class="line">                end = <span class="literal">False</span>  <span class="comment"># 结束循环</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            Behavior.append(Mov)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.添加所喜好的动作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">append_YourMov</span>(<span class="params">level</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;终于等到你,老铁&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;1.胸肌&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;2.肩部&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;3.腹肌&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;4.二头&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;5.背部&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;6.腿部&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------&quot;</span>)</span><br><span class="line">    choose2 = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您的喜好:&quot;</span>))</span><br><span class="line">    <span class="keyword">if</span> choose2 == <span class="number">1</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">2</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">3</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">4</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">5</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">elif</span> choose2 == <span class="number">6</span>:</span><br><span class="line">        Movement_menu(level,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.删除你想要去掉的运动动作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Detele_Mov</span>():</span><br><span class="line">    <span class="keyword">global</span> Behavior <span class="comment">#里面加有动作</span></span><br><span class="line">    i = <span class="number">1</span> <span class="comment">#定义这为对应的选择</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> demo <span class="keyword">in</span> Behavior:</span><br><span class="line">        <span class="built_in">print</span>(i,<span class="string">&quot;---&quot;</span>,demo,end = <span class="string">&quot; &quot;</span>)</span><br><span class="line">        i += <span class="number">1</span> <span class="comment">#需要自增</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;退出选择请在下方输入:4&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        choose3 = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您想要删除的动作:&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> choose3 == <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="comment">#结束函数</span></span><br><span class="line">        Behavior.pop(choose3-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.该函数作用是显示锻炼日志</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_allBehavior</span>():</span><br><span class="line">    <span class="built_in">print</span>(date) <span class="comment">#这个是用来调用我在上面引用的api，如果报错请删掉这一行</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在加载您的绝美训练动作....&quot;</span>)</span><br><span class="line">    nums = <span class="built_in">len</span>(Behavior)   <span class="comment">#统计动作数量</span></span><br><span class="line">    <span class="keyword">if</span> nums == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;快去添加你喜好的动作吧！&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line">        <span class="keyword">return</span> <span class="comment">#没有动作添加，所以直接退出该函数</span></span><br><span class="line">    <span class="keyword">for</span> Mov <span class="keyword">in</span> Behavior:</span><br><span class="line">        <span class="built_in">print</span>(Mov)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="comment">#这里的Behavior是那个动作集里的</span></span><br><span class="line">    <span class="built_in">print</span>(content) <span class="comment">#这个是用来调用我在上面引用的api，如果报错请删掉这一行</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;实现主要的业务逻辑&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        print_menu()</span><br><span class="line">        choose = <span class="built_in">input</span>(<span class="string">&quot;请输入你需要的功能:&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> choose == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            add_User()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            append_YourMov(Users[-<span class="number">1</span>][<span class="string">&quot;level&quot;</span>])</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            Detele_Mov()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">            show_allBehavior()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;5&#x27;</span>:</span><br><span class="line">            exit()</span><br><span class="line">        <span class="keyword">elif</span> choose == <span class="string">&#x27;6&#x27;</span>:</span><br><span class="line">            <span class="keyword">pass</span>  <span class="comment">#可以自己拓展</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#执行主函数代码,一run就开始调用该函数</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p><h2 id="2-更新版本-4"><a href="#2-更新版本-4" class="headerlink" title="2.更新版本"></a>2.更新版本</h2><p><strong>等待你的发掘…..</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;总览—-主函数执行-pyhton版&quot;&gt;&lt;a href=&quot;#总览—-主函数执行-pyhton版&quot; class=&quot;headerlink&quot; title=&quot;总览—-主函数执行(pyhton版)&quot;&gt;&lt;/a&gt;总览—-主函数执行(pyhton版)&lt;/h1&gt;&lt;h2 id=&quot;1-M</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>蓝牙小车开发时的一些细节</title>
    <link href="https://madao-luv.github.io/posts/842d5faf.html"/>
    <id>https://madao-luv.github.io/posts/842d5faf.html</id>
    <published>2024-05-07T15:51:28.421Z</published>
    <updated>2024-05-09T15:44:03.834Z</updated>
    
    <content type="html"><![CDATA[<h1 id="小车基本运动之最重要的—-PWM"><a href="#小车基本运动之最重要的—-PWM" class="headerlink" title="小车基本运动之最重要的—-PWM"></a>小车基本运动之最重要的—-PWM</h1><h2 id="1-PWM（Pulse-Width-Modulation）脉冲宽度调制是什么"><a href="#1-PWM（Pulse-Width-Modulation）脉冲宽度调制是什么" class="headerlink" title="1.PWM（Pulse Width Modulation）脉冲宽度调制是什么?"></a>1.PWM（Pulse Width Modulation）脉冲宽度调制是什么?</h2><p>为何这个<strong>PWM（脉冲宽度）</strong>如此重要呢？因为在具有惯性的系统中，我们可以通过对一系列脉冲的宽度进行调制，来等效地获得我们所需要的模拟量，经常用于<strong>电机控速</strong>等领域（属于是常客了）<br>举一个例子:比如说我的占空比为50%,那么在这个一个PWM的周期内，电机处于高电平的时间是只有周期的一半，低电平默认为0，那么我们计算等效电压—-( T(on) <em> 5v + T(off) </em> 0v ) / Ts = 等效电压V 所以50%占空比可以等效为2.5v电压<br>通过这个等效电压的例子，也为我们如何控制电机的速度以及呼吸灯等等一系列工业生产提供了新的思路—-<strong>通过PWM（即控制占空比）来控制等效电压—-从而GPIO配置为复用推挽输出，定时器的四个通道（STM32外设）来控制引脚输出</strong>  </p><h2 id="2-如何实现PWM？"><a href="#2-如何实现PWM？" class="headerlink" title="2.如何实现PWM？"></a>2.如何实现PWM？</h2><p>实现PWM，我们需要用到定时器和OC（输出比较），通过定时器不断计数然后和RCC（参考比较值）不断比较，<strong>当计数小于RCC时，输出的电平为高电平，而当计数大于RCC时，输出的电平为低电平</strong>—-这个过程叫输出比较—-然后统计高电平在总的计数期间的比值—-占空比。<br><img src="https://tse4-mm.cn.bing.net/th/id/OIP-C.OCF9MV3uCHwJi5rG-ovLhAHaEY?rs=1&amp;pid=ImgDetMain" alt="PWM基本结构" title="江科大PWM的基本结构图"><br>请看此图<br>我们三步走战略,1.初始化时基单元，2.GPIO串口复用AFIO初始化  3.定时器初始化。 以及知道参数计算的公式:1. PWMFreq = CK_PSC / (PSC+1) / (ARR+1)<br>2.PWM占空比Duty = CCR / (ARR + 1)<br>3.PWM分辨率Reso = 1 / (ARR + 1) </p><h2 id="3-PWM代码实现"><a href="#3-PWM代码实现" class="headerlink" title="3.PWM代码实现"></a>3.PWM代码实现</h2><p>放在<strong>*\Hardware中</strong>那么请看具体代码<br>这是PWM.h的具体代码<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __PWM_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __PWM_H__</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PWM_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure></p><p>这是PWM.c的具体代码<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.时基单元</span></span><br><span class="line"><span class="comment">//2.oc输出比较</span></span><br><span class="line"><span class="comment">//3.GPIO初始化</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PWM_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4,ENABLE);   <span class="comment">//开启TIM4的外部时钟</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB,ENABLE);<span class="comment">//PB6-PB9 开启GPIOB的外部时钟</span></span><br><span class="line"></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStruct;</span><br><span class="line">GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF_PP;  <span class="comment">//配置为复用推挽输出，定时器的四个通道来控制引脚输出</span></span><br><span class="line">GPIO_InitStruct.GPIO_Pin = GPIO_Pin_6 | GPIO_Pin_7 | GPIO_Pin_8 | GPIO_Pin_9;</span><br><span class="line">GPIO_InitStruct.GPIO_Speed =  GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOB,&amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义时基单元</span></span><br><span class="line">TIM_TimeBaseInitTypeDefTIM_TimeBaseInitStruct;</span><br><span class="line">TIM_TimeBaseInitStruct.TIM_CounterMode = TIM_CounterMode_Up; <span class="comment">//从0开始向上计数</span></span><br><span class="line">TIM_TimeBaseInitStruct.TIM_Period = <span class="number">100</span> - <span class="number">1</span>; <span class="comment">//ARR重装值</span></span><br><span class="line">TIM_TimeBaseInitStruct.TIM_Prescaler = <span class="number">36</span> - <span class="number">1</span>; <span class="comment">//PSC</span></span><br><span class="line">TIM_TimeBaseInitStruct.TIM_RepetitionCounter = <span class="number">0</span>; <span class="comment">//高级定时器才有的，我们用不到这里</span></span><br><span class="line">TIM_TimeBaseInitStruct.TIM_ClockDivision = TIM_CKD_DIV1;  <span class="comment">//预分频 DIV1是0预分频</span></span><br><span class="line"></span><br><span class="line">TIM_TimeBaseInit(TIM4,&amp;TIM_TimeBaseInitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">// OC 输出比较  初始化OC比较的属性</span></span><br><span class="line">TIM_OCInitTypeDef TIM_OCInitStruct;</span><br><span class="line"></span><br><span class="line"><span class="comment">//OC1 输出比较通道口1</span></span><br><span class="line">TIM_OCInitStruct.TIM_OCMode = TIM_OCMode_PWM1;</span><br><span class="line">TIM_OCInitStruct.TIM_OCPolarity = TIM_OCPolarity_High; <span class="comment">//以高电平为有效电平</span></span><br><span class="line">TIM_OCInitStruct.TIM_OutputState = TIM_OutputState_Enable;</span><br><span class="line">TIM_OCInitStruct.TIM_Pulse = <span class="number">0</span>; <span class="comment">//CCR 预期值 CNT 与 CCR进行比较</span></span><br><span class="line">TIM_OC1Init(TIM4,&amp;TIM_OCInitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">//oc2</span></span><br><span class="line">TIM_OCInitStruct.TIM_OCMode = TIM_OCMode_PWM1;</span><br><span class="line">TIM_OCInitStruct.TIM_OCPolarity = TIM_OCPolarity_High; <span class="comment">//以高电平为有效电平</span></span><br><span class="line">TIM_OCInitStruct.TIM_OutputState = TIM_OutputState_Enable;</span><br><span class="line">TIM_OCInitStruct.TIM_Pulse = <span class="number">0</span>; <span class="comment">//CCR 预期值 CNT 与 CCR进行比较</span></span><br><span class="line">TIM_OC2Init(TIM4,&amp;TIM_OCInitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">//oc3</span></span><br><span class="line">TIM_OCInitStruct.TIM_OCMode = TIM_OCMode_PWM1;</span><br><span class="line">TIM_OCInitStruct.TIM_OCPolarity = TIM_OCPolarity_High; <span class="comment">//以高电平为有效电平</span></span><br><span class="line">TIM_OCInitStruct.TIM_OutputState = TIM_OutputState_Enable;</span><br><span class="line">TIM_OCInitStruct.TIM_Pulse = <span class="number">0</span>; <span class="comment">//CCR 预期值 CNT 与 CCR进行比较</span></span><br><span class="line">TIM_OC3Init(TIM4,&amp;TIM_OCInitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">//oc4</span></span><br><span class="line">TIM_OCInitStruct.TIM_OCMode = TIM_OCMode_PWM1;</span><br><span class="line">TIM_OCInitStruct.TIM_OCPolarity = TIM_OCPolarity_High; <span class="comment">//以高电平为有效电平</span></span><br><span class="line">TIM_OCInitStruct.TIM_OutputState = TIM_OutputState_Enable;</span><br><span class="line">TIM_OCInitStruct.TIM_Pulse = <span class="number">0</span>; <span class="comment">//CCR 预期值 CNT 与 CCR进行比较</span></span><br><span class="line">TIM_OC4Init(TIM4,&amp;TIM_OCInitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在需要不断切换定时器的周期时，而且周期都比较短，  T = 1 / F</span></span><br><span class="line"><span class="comment">//程序员需要通过预加载寄存器配合自动重装载寄存器，来操作定时器 缓存</span></span><br><span class="line">TIM_OC1PreloadConfig(TIM4,TIM_OCPreload_Enable);</span><br><span class="line">TIM_OC2PreloadConfig(TIM4,TIM_OCPreload_Enable);</span><br><span class="line">TIM_OC3PreloadConfig(TIM4,TIM_OCPreload_Enable);</span><br><span class="line">TIM_OC4PreloadConfig(TIM4,TIM_OCPreload_Enable);</span><br><span class="line">TIM_ARRPreloadConfig(TIM4, ENABLE);</span><br><span class="line"></span><br><span class="line">TIM_Cmd(TIM4,ENABLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="4-Motor的代码实现以及IN比值设置参考图"><a href="#4-Motor的代码实现以及IN比值设置参考图" class="headerlink" title="4.Motor的代码实现以及IN比值设置参考图"></a>4.Motor的代码实现以及IN比值设置参考图</h2><p>在我们完成了PWM的初始化也就同时完成了OC里的RCC的定义，我们通过改变RCC的值来不断改变小车的基本运动速度。<br><img src="https://ts1.cn.mm.bing.net/th/id/R-C.c540134ba84fff722dafb314fa1c498f?rik=MTqhb01kKO7W5Q&amp;riu=http%3a%2f%2fc.51hei.com%2fa%2fa%2ff%2f641716481932543.jpg&amp;ehk=LpqhaWqf3ZJx8Qk4rBqoyGHGjtr74xI6qAZcOsMW4s8%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&amp;sres=1&amp;sresct=1" alt="输入输出模式控制图" title="输入输出对模式的控制图"><br>根据这张图，我们来设置小车的移动和速度。<br>我们分别将它们命名为Motor.c,Motor.h并放到\Hardware文件中<br>此为Motor.h<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __MOTOR_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __MOTOR_H__</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_SetSpeed</span><span class="params">(<span class="type">uint8_t</span> left_1,<span class="type">uint8_t</span> left_2,<span class="type">uint8_t</span> right_1,<span class="type">uint8_t</span> right_2)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Run</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Back</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_TurnLeft</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Spin_Left</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_TurnRight</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Spin_Right</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Brake</span><span class="params">(<span class="type">uint16_t</span> time)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">````  </span><br><span class="line">此为Motor.c</span><br><span class="line">````c</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;PWM.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Delay.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//机器人初始化</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">PWM_Init();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//控制小车轮子的速度,分别设置四个通道的RCC，每两个通道,控制一个轮子</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_SetSpeed</span><span class="params">(<span class="type">uint8_t</span> left_1,<span class="type">uint8_t</span> left_2,<span class="type">uint8_t</span> right_1,<span class="type">uint8_t</span> right_2)</span></span><br><span class="line">&#123;</span><br><span class="line">TIM_SetCompare1(TIM4,left_1);   <span class="comment">//TIM_SetCompare是为了改变我们设置在时基单元里的RCC的大小</span></span><br><span class="line">TIM_SetCompare2(TIM4,left_2);</span><br><span class="line">TIM_SetCompare3(TIM4,right_1);</span><br><span class="line">TIM_SetCompare4(TIM4,right_2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//车子向前开动</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Run</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Speed &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Speed &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Motor_SetSpeed(Speed,<span class="number">0</span>,Speed,<span class="number">0</span>); <span class="comment">//可以从输出比较的图看出来</span></span><br><span class="line">Delay_ms(time);</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//最后车子停止运动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//车子后退</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Back</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Speed &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Speed &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,Speed,<span class="number">0</span>,Speed); <span class="comment">//可以从输出比较的图看出来</span></span><br><span class="line">Delay_ms(time);</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//最后车子停止运动</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//车子左转</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_TurnLeft</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Speed &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Speed &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,Speed,<span class="number">0</span>); <span class="comment">//可以从输出比较的图看出来</span></span><br><span class="line">Delay_ms(time);</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//最后车子停止运动</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//小车左旋转</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Spin_Left</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Speed &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Speed &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,Speed,Speed,<span class="number">0</span>); <span class="comment">//可以从输出比较的图看出来</span></span><br><span class="line">Delay_ms(time);</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//最后车子停止运动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//车子右转</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_TurnRight</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Speed &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Speed &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Motor_SetSpeed(Speed,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//可以从输出比较的图看出来</span></span><br><span class="line">Delay_ms(time);</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//最后车子停止运动</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//小车右旋转</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Spin_Right</span><span class="params">(<span class="type">uint8_t</span> Speed,<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Speed &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Speed &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Speed = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Motor_SetSpeed(Speed,<span class="number">0</span>,<span class="number">0</span>,Speed); <span class="comment">//可以从输出比较的图看出来</span></span><br><span class="line">Delay_ms(time);</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">//最后车子停止运动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//小车刹车</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Motor_Brake</span><span class="params">(<span class="type">uint16_t</span> time)</span></span><br><span class="line">&#123;</span><br><span class="line">Motor_SetSpeed(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">Delay_ms(time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="小车的蓝牙模块—-Serial-串口"><a href="#小车的蓝牙模块—-Serial-串口" class="headerlink" title="小车的蓝牙模块—-Serial(串口)"></a>小车的蓝牙模块—-Serial(串口)</h1><p>1.通信的目的:将一个设备的数据传送到另一个设备，扩展硬件系统<br>2.通信协议：制定通信的规则，通信双方按照协议规则进行数据收发</p><h2 id="串口的性质"><a href="#串口的性质" class="headerlink" title="串口的性质"></a>串口的性质</h2><p>USART:<br>1.引脚—-TX和RX 2.双工—-全双工(发送双方可以同时收发数据) 3.时钟:异步 4.电平:单端 5.设备:点对点—-就是说只能双方进行通信</p><h2 id="串口通信原理图"><a href="#串口通信原理图" class="headerlink" title="串口通信原理图"></a>串口通信原理图</h2><p><img src="https://ts1.cn.mm.bing.net/th/id/R-C.5d15c4f4a252ae0bd12a220c39097671?rik=wO7qF1FO%2fpSNJw&amp;riu=http%3a%2f%2fimg.xjishu.com%2fimg%2fzl%2f2020%2f8%2f11%2fomv6m3zrm.gif&amp;ehk=ml9EvQow38iIHtwWiWKa78LUvhDIi7r3qTliUrsT4QQ%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" alt="串口原理" title="串口原理"><br>串口接线是交叉的，<strong>蓝牙串口不是独立供电的</strong>,所以我们是要将蓝牙模块与stm32连接，以stm32供电给蓝牙。</p><h2 id="USART-串口-性质"><a href="#USART-串口-性质" class="headerlink" title="USART(串口)性质"></a>USART(串口)性质</h2><p>1.USART,(Universal Synchronous/Asynchronous Receiver/Transmitte)通用同步/异步收发器<br>2.USART是STM32内部集成的硬件外设，可根据数据寄存器的一个字节数据自动生成数据帧时序，从TX引脚发送出去，也可以自动接收RX引脚的数据帧时序，拼接为一个字节数据，存放在数据寄存器里<br>3.自带波特率发生器，最高达4.5Mbits/s<br>4.可配置数据为长度(8/9),停止位长度(0.5/1/1.5/2)<br>5.可选校验位(无校验/奇校验/偶校验)<br>6.支持同步模式，硬件流控制，DMA，智能卡，IrDA,LIN<br>7.<strong>STM32F103C8T6 USART资源:USART1,USART2,USART3</strong> 在这里，商家给我指定了串口资源—-USART3,所以后面的代码篇用到的都为USART3</p><h2 id="Serial代码篇-Hardware"><a href="#Serial代码篇-Hardware" class="headerlink" title="Serial代码篇(\Hardware)"></a>Serial代码篇(\Hardware)</h2><p>1.Serial.h<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __SERIAL_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __SERIAL_H__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//接收数据的结构体</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="type">uint8_t</span> Data[<span class="number">100</span>];   <span class="comment">//这个是用来接收文本数据的</span></span><br><span class="line"><span class="type">uint8_t</span> flag;    <span class="comment">//这个是后面main里面判断要用到的</span></span><br><span class="line"><span class="type">uint8_t</span> Length;   <span class="comment">//接收到的文本数据的大小</span></span><br><span class="line"></span><br><span class="line">&#125;MyUsart;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> MyUsart MYUSART3;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><br>2.Serial.c<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Serial.h&quot;</span>    <span class="comment">//在.h文件里面定义的结构体，你需要在这个文件里面引用</span></span></span><br><span class="line">MyUsart MYUSART3;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.GPIO的配置</span></span><br><span class="line"><span class="comment">//2.USART的配置</span></span><br><span class="line"><span class="comment">//3.NVIC的配置  接收文本</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3,ENABLE);   <span class="comment">//USART3</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB,ENABLE);</span><br><span class="line"><span class="comment">//GPIO配置</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStruct;</span><br><span class="line">GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF_PP;   <span class="comment">//复用推挽输出 </span></span><br><span class="line">GPIO_InitStruct.GPIO_Pin = GPIO_Pin_10;</span><br><span class="line">GPIO_InitStruct.GPIO_Speed =  GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOB,&amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line">GPIO_InitStruct.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class="line">GPIO_InitStruct.GPIO_Pin = GPIO_Pin_11;</span><br><span class="line">GPIO_InitStruct.GPIO_Speed =  GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOB,&amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line"><span class="comment">//NIVC中断配置</span></span><br><span class="line">NVIC_InitTypeDef NVIC_InitStruct;   <span class="comment">//谁来触发中断</span></span><br><span class="line">NVIC_InitStruct.NVIC_IRQChannel = USART3_IRQn;</span><br><span class="line">NVIC_InitStruct.NVIC_IRQChannelCmd = ENABLE;</span><br><span class="line">NVIC_InitStruct.NVIC_IRQChannelPreemptionPriority = <span class="number">2</span>;</span><br><span class="line">NVIC_InitStruct.NVIC_IRQChannelSubPriority = <span class="number">2</span>;</span><br><span class="line">NVIC_Init(&amp;NVIC_InitStruct);</span><br><span class="line"></span><br><span class="line">USART_ITConfig(USART3,USART_IT_RXNE,ENABLE);    <span class="comment">//配置USART中断如何触发 接收中断</span></span><br><span class="line">USART_ITConfig(USART3,USART_IT_IDLE,ENABLE);     <span class="comment">//空闲中断</span></span><br><span class="line"></span><br><span class="line">USART_InitTypeDef USART_InitStruct;</span><br><span class="line">USART_InitStruct.USART_BaudRate = <span class="number">9600</span>; </span><br><span class="line">USART_InitStruct.USART_HardwareFlowControl = DISABLE;</span><br><span class="line">USART_InitStruct.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;  <span class="comment">//接收和发送</span></span><br><span class="line">USART_InitStruct.USART_Parity = USART_Parity_No;  <span class="comment">//不校验</span></span><br><span class="line">USART_InitStruct.USART_StopBits = <span class="number">8</span>;</span><br><span class="line">USART_InitStruct.USART_WordLength = USART_WordLength_8b;</span><br><span class="line">USART_Init(USART3,&amp;USART_InitStruct);</span><br><span class="line"></span><br><span class="line">USART_Cmd(USART3,ENABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//中断函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">USART3_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//接收判断</span></span><br><span class="line"><span class="keyword">if</span> (USART_GetITStatus(USART3,USART_IT_RXNE) == SET)</span><br><span class="line">&#123;</span><br><span class="line">USART_ClearITPendingBit(USART3,USART_IT_RXNE);  <span class="comment">//清除后为了下一次接收数据做准备</span></span><br><span class="line">MYUSART3.Data[MYUSART3.Length++] = USART_ReceiveData(USART3);   <span class="comment">//我接收好一次数据后，指针指向新的位置</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (USART_GetITStatus(USART3,USART_IT_IDLE) == SET)</span><br><span class="line">&#123;</span><br><span class="line">MYUSART3.Data[MYUSART3.Length] = <span class="string">&#x27;\0&#x27;</span>;  <span class="comment">//字符串的最后一位是&#x27;\0&#x27;</span></span><br><span class="line">MYUSART3.flag = <span class="number">1</span>;</span><br><span class="line">MYUSART3.Length = <span class="number">0</span>;</span><br><span class="line">USART_ReceiveData(USART3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//空闲判断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//发送函数</span></span><br></pre></td></tr></table></figure><br>这样，我们便完成了Serial的定义，我们继续再main.c里面完成编码</p><h1 id="蓝牙小车的最终引用"><a href="#蓝牙小车的最终引用" class="headerlink" title="蓝牙小车的最终引用"></a>蓝牙小车的最终引用</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Serial.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Motor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Myu3.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);  <span class="comment">//中断优先级分组分2组</span></span><br><span class="line"><span class="comment">//Serial_Init();</span></span><br><span class="line">USART3_init(<span class="number">9600</span>);</span><br><span class="line">Motor_Init();</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (MyUsart3.flag)</span><br><span class="line">&#123;</span><br><span class="line">MyUsart3.flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">const</span> <span class="type">char</span>*)MyUsart3.buff,<span class="string">&quot;ONA&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Motor_Run(<span class="number">80</span>,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">const</span> <span class="type">char</span>*)MyUsart3.buff,<span class="string">&quot;ONB&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Motor_Back(<span class="number">80</span>,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">const</span> <span class="type">char</span>*)MyUsart3.buff,<span class="string">&quot;ONC&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Motor_Spin_Left(<span class="number">80</span>,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">const</span> <span class="type">char</span>*)MyUsart3.buff,<span class="string">&quot;OND&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Motor_Spin_Right(<span class="number">80</span>,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">const</span> <span class="type">char</span>*)MyUsart3.buff,<span class="string">&quot;ONF&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Motor_Brake(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">const</span> <span class="type">char</span>*)MyUsart3.buff,<span class="string">&quot;ONE&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Motor_Brake(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h1><p>最后，感谢你阅读完整个Blog，希望我的文章对你有所启发，有所帮助。感谢!<br><img src="https://www.gxdmw.com/data/attachment/portal/202107/21/081515mhkahxxakoee9gn9.jpg" alt="有时候也要回头" title="蓦然回首"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;小车基本运动之最重要的—-PWM&quot;&gt;&lt;a href=&quot;#小车基本运动之最重要的—-PWM&quot; class=&quot;headerlink&quot; title=&quot;小车基本运动之最重要的—-PWM&quot;&gt;&lt;/a&gt;小车基本运动之最重要的—-PWM&lt;/h1&gt;&lt;h2 id=&quot;1-PWM（Pul</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>STM32的一些必备知识与自我认知</title>
    <link href="https://madao-luv.github.io/posts/b0e2bb20.html"/>
    <id>https://madao-luv.github.io/posts/b0e2bb20.html</id>
    <published>2024-04-29T15:32:58.413Z</published>
    <updated>2024-04-30T06:36:32.999Z</updated>
    
    <content type="html"><![CDATA[<p class='p center logo large'>STM32的主要外设</p><p><strong>1.NVIC—-嵌套向量中断控制器    </strong>2.SysTick—-系统滴答定时器: 它们是内核里的外设<br><strong>3.RCC—-复位和时钟控制 这个外设十分重要,因为其他的外设再上电的情况下默认是没有时钟的，那么不给时钟的情况下，操作其他外设是无效的，外设不会工作,因此我们需要RCC来配置相应外设的时钟—-使能其时钟    </strong>4.GPIO—-通用IO口(用于输入和输出),5.AFIO—-复用IO口(因为每个端口除了GPIO口所定义的功能以外，还有别的功能也可以在该端口实现，就是通过AFIO进行配置，复用的意思就是再次使用-个人理解),其次还有中断端口配置<br><strong>6.EXTI—-外部中断，当引脚有电平变化时,触发中断  </strong>7.TIM—-定时器(十分重要,因为是经常使用,功能最大的外设)—-用处:生成PWM波形,测频率,配置成专用编码器接口<br><strong>8.ADC—-模数转化器(Analog Digital Conversioner)—-举个例子:汽车发动机的冷冻装置,热电偶的原理  </strong>9.DMA—-直接内存访问(类似于STM32F103C8的小秘书,帮助STM32F103C8完成大量数据的搬运,减轻STM32F103C8的压力)<br><strong>10.USART—-同步/异步串口通信(实际上用异步串口比较多),这个可以用于串口通信,串口下载程序  </strong>11.I2C通信,以及12.SPI通信,以及13.CAN通信(这个应用于汽车领域较多),14.USB通信<br><strong>15.RTC—-实时时钟(原理是时间戳秒数的总数来计算—-年,月,日,时,分,秒),可以做车载时钟  </strong>16.PWR—-电源控制(三种模式:1.睡眠模式,2.停止模式,3.待机模式)<br><strong>17.IWDG—-独立看门狗,WWDG—-窗口看门狗,防止程序进入死循环  </strong>18.BKP—-备份寄存器,可以与RTC相配合实现电子时钟效果<br><strong>19.DAC—-(Digital Analog conversion)数模转化器  </strong>20.SDIO—-SD步接口<br><strong>21.USB OTG—-USB主机接口  </strong>22.FSMC—-可变静态存储控制器  </p>]]></content>
    
    
    <summary type="html">基础外设与解释</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>STM32知识每日更新</title>
    <link href="https://madao-luv.github.io/posts/4055ee82.html"/>
    <id>https://madao-luv.github.io/posts/4055ee82.html</id>
    <published>2024-04-28T14:33:55.300Z</published>
    <updated>2024-04-29T16:02:06.766Z</updated>
    
    <content type="html"><![CDATA[<p>**Time:2024.4.28<br><p class='p center h3'>1.GPIO端口进行编程作为模拟输入功能，内部操作包括:1.输出缓存器被禁止 2.施密特触发器输入停用，I/O引脚的每个模拟输入的功耗变为零 3.弱上拉和下拉电阻被关闭 4.对输入数据寄存器的读访问值为'0'</p><br><p class='p center h3'>2.stm32GPIO支持4种输出模式:开漏输出，开漏复用输出，推挽输出，推挽复用输出。 Tips: 下拉只能用来输入'</p></p><ol><li>STM32GPIO支持三种最大翻转速度:2MHz,10Mhz,50Mhz，所以最大不能超过50Mhz， Tips:不存在GPIO_IN_INIT_LOW,实际上当引脚设置为输入时，其状态对应当时引脚外部的电平状态。</li></ol>]]></content>
    
    
    <summary type="html">一些STM32的知识</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>flutter类的细节</title>
    <link href="https://madao-luv.github.io/posts/9bcefa22.html"/>
    <id>https://madao-luv.github.io/posts/9bcefa22.html</id>
    <published>2024-04-21T16:26:25.000Z</published>
    <updated>2024-04-23T02:44:26.255Z</updated>
    
    <content type="html"><![CDATA[<p class='p center logo large'>Flutter近日学习所遇到的问题</p><p class='p center h3'>是关于flutter里遇到的抽象类里面，关于继承和多态的应用。其中的语言是关于dart</p><span class='p center h3'>首先，我创建一个class Person的类</span><p class='p center h3'>1.第一种:继承---class Man extengds Person 对于它而言便是Person里面的方法以及属性都需要实现， 而第二种便是:多态---class Man implements Person，对于它来说是来实现接口的，若各位学有余力可以去自学一下"设计模式"这门课，废话不多说，我们来具体看看它的具体代码实现</p><p>比如说这个代码:<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span></span>&#123;</span><br><span class="line">    eat();</span><br><span class="line">    run(); <span class="comment">//我在这里进行了抽象函数的设定</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//然后我定义一个子类叫作man</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">extends</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    eat()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我吃饭了&quot;</span>); <span class="comment">//必须是具体的实现操作</span></span><br><span class="line">    &#125;</span><br><span class="line">    run()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;吃完饭运动一下&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这个就是类的继承</span></span><br></pre></td></tr></table></figure></p><p>然后就是类的继承<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    eat();</span><br><span class="line">    run();</span><br><span class="line"></span><br><span class="line">&#125;<span class="comment">//这里我们是封装这个包，可以使用import方法引入</span></span><br></pre></td></tr></table></figure><br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面就是举例子如何引入封装</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;Person.h&quot;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="title">implement</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    eat()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;fa&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    run()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;man&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>这里便是多态的实现，我创建了一个接口，所以便用了implement的方法来实现函数的创建</p>]]></content>
    
    
    <summary type="html">flutter里抽象类的解释</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>随心一听</title>
    <link href="https://madao-luv.github.io/posts/5e52f62.html"/>
    <id>https://madao-luv.github.io/posts/5e52f62.html</id>
    <published>2024-03-21T16:14:58.000Z</published>
    <updated>2024-05-17T16:26:23.237Z</updated>
    
    <content type="html"><![CDATA[<h1 id="POEM—-To-find-and-Not-to-yield"><a href="#POEM—-To-find-and-Not-to-yield" class="headerlink" title="POEM—-To find,and Not to yield"></a>POEM—-To find,and Not to yield</h1><p><strong>2024-5-10</strong> Some day I shall sing to you in the sunrise of some other world “I have seen you before in the light of the earth,in the love of man.” —-Tagore</p><p><strong>2024-5-19</strong> I love you,you are like the corolla of autumn candlelight of the light,and daily food in my empty soul.</p><h1 id="詩—-斯人若彩虹，遇上方知有"><a href="#詩—-斯人若彩虹，遇上方知有" class="headerlink" title="詩—-斯人若彩虹，遇上方知有"></a>詩—-斯人若彩虹，遇上方知有</h1><p><strong>2024-5-10</strong> 世人万千种，浮云莫去求，斯人若彩虹，遇上方知有。</p><p><strong>2024-5-10</strong> 去奋斗，去追求，去发现，以及永不屈服—-《死亡诗社》</p><p><strong>2024-5-10</strong> 花满市，月侵衣，少年情事老来悲。</p><p><strong>2024-5-10</strong> 读而未晓则思，思而未晓则读。</p><p><strong>2024-5-18</strong> 这个森林的樱今天也结束了…..也许不是什么巧遇吧……<br><img src="https://img.3dmgame.com/uploads/images/news/20220427/1651046376_991874.jpg" alt="LIFE" title="LIVE?"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;POEM—-To-find-and-Not-to-yield&quot;&gt;&lt;a href=&quot;#POEM—-To-find-and-Not-to-yield&quot; class=&quot;headerlink&quot; title=&quot;POEM—-To find,and Not to yield&quot;&gt;</summary>
      
    
    
    
    
    <category term="life" scheme="https://madao-luv.github.io/tags/life/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://madao-luv.github.io/posts/0.html"/>
    <id>https://madao-luv.github.io/posts/0.html</id>
    <published>2024-03-19T16:35:56.179Z</published>
    <updated>2024-03-19T16:43:24.996Z</updated>
    
    <content type="html"><![CDATA[{"name":"MADAO`Blog","short_name":"夜见山","theme_color":"#3b70fc","background_color":"#3b70fc","display":"standalone","scope":"/","start_url":"/","icons":[{"src":"/img/siteicon/16.png","sizes":"16x16","type":"image/png"},{"src":"/img/siteicon/32.png","sizes":"32x32","type":"image/png"},{"src":"/img/siteicon/48.png","sizes":"48x48","type":"image/png"},{"src":"/img/siteicon/64.png","sizes":"64x64","type":"image/png"},{"src":"/img/siteicon/128.png","sizes":"128x128","type":"image/png"},{"src":"/img/siteicon/144.png","sizes":"144x144","type":"image/png"},{"src":"/img/siteicon/512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}]]></content>
    
    
      
      
    <summary type="html">{&quot;name&quot;:&quot;MADAO`Blog&quot;,&quot;short_name&quot;:&quot;夜见山&quot;,&quot;theme_color&quot;:&quot;#3b70fc&quot;,&quot;background_color&quot;:&quot;#3b70fc&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;scope&quot;:&quot;/&quot;,&quot;start_url&quot;:</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://madao-luv.github.io/posts/4a17b156.html"/>
    <id>https://madao-luv.github.io/posts/4a17b156.html</id>
    <published>2024-03-18T16:23:00.968Z</published>
    <updated>2024-03-19T09:47:12.903Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
